<div class="form-container">
  <h2>Solicitar Nova Entrega</h2>
  <p>Preencha os dados abaixo para encontrar o entregador mais próximo.</p>

  <form [formGroup]="deliveryForm" (ngSubmit)="onSubmit()">
    
    <div class="form-field">
  <label for="destinationAddress">Endereço de Destino</label>

  <div class="input-with-button">
    <input 
      id="destinationAddress" 
      type="text" 
      formControlName="destinationAddress"
      placeholder="Rua, Número, Bairro, Cidade - Ponto de Referência">
    
    <button type="button" (click)="validateAddress()" [disabled]="isGeocoding">
      <span *ngIf="!isGeocoding">Validar</span>
      <span *ngIf="isGeocoding" class="spinner-small"></span> </button>
  </div>
  
  <div *ngIf="destinationAddress?.invalid && destinationAddress?.touched" class="error-message">
    <small *ngIf="destinationAddress?.errors?.['required']">O endereço é obrigatório.</small>
    <small *ngIf="destinationAddress?.errors?.['minlength']">O endereço parece curto demais.</small>
  </div>
</div>

    <div class="form-field">
      <label for="itemDescription">Descrição do Item</label>
      <input 
        id="itemDescription"
        type="text"
        formControlName="itemDescription"
        placeholder="Ex: Bateria Moura M60AD">

      <div *ngIf="itemDescription?.invalid && itemDescription?.touched" class="error-message">
        <small *ngIf="itemDescription?.errors?.['required']">A descrição é obrigatória.</small>
      </div>
    </div>

    <button type="submit" [disabled]="deliveryForm.invalid || isLoading">
      <span *ngIf="!isLoading">Solicitar Entrega</span>
      <span *ngIf="isLoading">Procurando entregador...</span>
    </button>

    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

  </form>
</div>